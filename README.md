# Kaluga urban environment bot

Телеграм бот для проекта "Городская среда" города Калуги

## Запуск бота

### Локальный запуск

Перед локальным запуском необходимо убедиться, что на машине установлен `python` версии не ниже `3.10`.

Затем необходимо установить зависимости командой:

```shell
pip install -r requirements.txt
```

находясь в корне проекта

Для запуска бота нужно установить следующие параметры окружения:

* `BOT_TOKEN` - токен телеграм бота
* `BOT_ADMINS` - список администраторов бота: строка со списком`telegram_id`, разделенных через запятую (Например, '
  123456, 654321')
* `DB_CONNECTION_STRING` - строка подключения к БД (по умолчанию: `sqlite:///local.db`). Формат строк подключения можете
  посмотреть [тут](http://docs.peewee-orm.com/en/latest/peewee/playhouse.html?highlight=connection%20string#database-url)

Сам бот запускается следующей командой из директории `src`:

```shell
python main.py
```

### Запуск с помощью docker

Необходимо наличие [docker](https://www.docker.com/) на машине.

Сборка образа:

```shell
docker build -t {имя образа} .
```

Запуск контейнера

```shell
python run \
  -e BOT_TOKEN={токен телеграм бота} \
  -e BOT_ADMINS={список идентификаторов администраторов} \
  -e DB_CONNECTION_STRING={строка подключения к БД} \
  {имя образа}
```
